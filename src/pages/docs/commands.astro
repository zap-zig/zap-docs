---
import DocsLayout from '../../layouts/DocsLayout.astro';
import Code from '../../components/Code.astro';
---

<DocsLayout title="Commands" description="zap command reference">
  <p>Complete reference for all zap commands.</p>

  <h2>init</h2>
  <p>Initialize a new Python project with a virtual environment.</p>
  <Code lang="bash" code="zap init [--python <version>]" />
  
  <p>Creates:</p>
  <ul>
    <li><code>.venv/</code> - Virtual environment</li>
    <li><code>zap.lock</code> - Lock file</li>
    <li><code>pyproject.toml</code> - Project configuration</li>
  </ul>

  <p><strong>Options:</strong></p>
  <table>
    <tr>
      <th>Option</th>
      <th>Description</th>
    </tr>
    <tr>
      <td><code>--python &lt;version&gt;</code></td>
      <td>Specify Python version (e.g., 3.12). Uses zap-managed Python if available.</td>
    </tr>
  </table>

  <h2>append</h2>
  <p>Install one or more packages.</p>
  <Code lang="bash" code={`zap append <package>...

# Install from PyPI
zap append requests
zap append flask sqlalchemy pytest

# Install with version constraint
zap append "requests>=2.28"

# Install from git repository
zap append git=https://github.com/user/repo

# Install specific branch
zap append git=https://github.com/user/repo@main

# Install specific tag
zap append git=https://github.com/user/repo@v1.0.0`} />
  
  <p>Packages are:</p>
  <ul>
    <li>Downloaded from PyPI or cloned from git</li>
    <li>Cached globally at <code>~/.cache/zap/</code></li>
    <li>Added to <code>pyproject.toml</code></li>
  </ul>

  <h2>remove</h2>
  <p>Remove one or more packages.</p>
  <Code lang="bash" code={`zap remove <package>...

# Example
zap remove requests flask`} />

  <h2>sync</h2>
  <p>Install all dependencies from <code>pyproject.toml</code>.</p>
  <Code lang="bash" code="zap sync" />
  
  <p>Use this after cloning a project or when <code>pyproject.toml</code> changes. Supports both PyPI packages and git dependencies.</p>

  <h2>install</h2>
  <p>Install packages from a requirements.txt file.</p>
  <Code lang="bash" code={`zap install -r <requirements.txt>

# Examples
zap install -r requirements.txt
zap install -r requirements/dev.txt`} />

  <p>Supports:</p>
  <ul>
    <li>Standard package specifiers (<code>requests>=2.28</code>)</li>
    <li>Comments and inline comments</li>
    <li>Environment markers (<code>pywin32; sys_platform == 'win32'</code>)</li>
    <li>Git URLs (<code>git+https://github.com/user/repo</code>)</li>
  </ul>

  <h2>run</h2>
  <p>Run a Python script in the virtual environment.</p>
  <Code lang="bash" code={`zap run <script.py> [args...]

# Examples
zap run app.py
zap run server.py --port 8080`} />

  <h2>list</h2>
  <p>List all installed packages.</p>
  <Code lang="bash" code={`zap list

# Output:
# Installed packages (3):
#   certifi 2024.2.2
#   requests 2.31.0
#   urllib3 2.2.0`} />

  <h2>python</h2>
  <p>Manage Python installations.</p>
  
  <h3>python install</h3>
  <p>Download and install a Python version from python-build-standalone.</p>
  <Code lang="bash" code={`zap python install <version>

# Install latest Python 3.12.x
zap python install 3.12

# Install specific version
zap python install 3.11.8`} />

  <p>Python versions are installed to <code>~/.zap/python/</code> and can be used with <code>zap init --python</code>.</p>

  <h3>python list</h3>
  <p>List installed and available Python versions.</p>
  <Code lang="bash" code={`zap python list

# Output:
# Installed Python versions:
#   3.12.8  (~/.zap/python/3.12.8/bin/python3)
#
# Available for download:
#   3.13.1
#   3.12.8  (installed)
#   3.11.11
#   3.10.16`} />

  <h2>cache</h2>
  <p>Manage the global package cache.</p>
  <Code lang="bash" code={`# Show cache info
zap cache info

# Clear cache
zap cache clean`} />

  <h2>version</h2>
  <p>Show zap version.</p>
  <Code lang="bash" code={`zap version
zap --version`} />

  <h2>help</h2>
  <p>Show help message.</p>
  <Code lang="bash" code={`zap help
zap --help`} />
</DocsLayout>
